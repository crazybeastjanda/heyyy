<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>360 Street View Tour</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
    }

    a-scene {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>
  <a-scene webxr="referenceSpaceType: local-floor" vr-mode-ui="enabled: true" cursor="rayOrigin: mouse"
    raycaster="objects: .clickable">

    <a-assets>
      <!-- Panos -->
<img id="pano1" src="assate/img1.avif">
<img id="pano2" src="assate/img2.avif">
<img id="pano3" src="assate/img3.avif">
<img id="pano4" src="assate/img4.avif">
<img id="pano5" src="assate/img5.avif">
<img id="pano6" src="assate/img6.avif">
<img id="pano7" src="assate/img7.avif">
<img id="pano8" src="assate/img8.avif">
<img id="pano9" src="assate/img9.avif">
<img id="pano10" src="assate/img10.avif">
<img id="pano11" src="assate/img11.avif">
<img id="pano12" src="assate/img12.avif">
<img id="pano13" src="assate/img13.avif">
<img id="pano14" src="assate/img14.avif">
<img id="pano15" src="assate/img15.avif">
<img id="pano16" src="assate/img16.avif">
<img id="pano17" src="assate/img17.avif">
<img id="pano18" src="assate/img18.avif">
<img id="pano19" src="assate/img19.avif">
<img id="pano20" src="assate/img20.avif">
<img id="pano21" src="assate/img21.avif">
<img id="pano22" src="assate/img22.avif">
<img id="pano23" src="assate/img23.avif">
<img id="pano24" src="assate/img24.avif">
<img id="pano25" src="assate/img25.avif">
<img id="pano26" src="assate/img26.avif">
<img id="pano27" src="assate/img27.avif">
<img id="pano28" src="assate/img28.avif">
<img id="pano29" src="assate/img29.avif">
<img id="pano30" src="assate/img30.avif">
<img id="pano31" src="assate/img31.avif">
<img id="pano32" src="assate/img32.avif">
<img id="pano33" src="assate/img33.avif">
<img id="pano34" src="assate/img34.avif">
<img id="pano35" src="assate/img35.avif">
<img id="pano36" src="assate/img36.avif">
<img id="pano37" src="assate/img37.avif">
<img id="pano38" src="assate/img38.avif">
<img id="pano39" src="assate/img39.avif">
<img id="pano40" src="assate/img40.avif">
<img id="pano41" src="assate/img41.avif">
<img id="pano42" src="assate/img42.avif">
<img id="pano43" src="assate/img43.avif">

      <!-- Location Icon -->
      <img id="locIcon" src="images/pin.png">
    </a-assets>

    <!-- ROOT CONTAINER FOR THUMBSTICK ROTATION -->
    <a-entity id="turnRoot" rotation="0 0 0">
      <!-- SKY (inside rotation container so it rotates with thumbstick) -->
      <a-sky id="sky" src="#pano1" rotation="0 90 0" material="shader: flat;"></a-sky>

      <!-- Camera rig (inside rotation container so it rotates with thumbstick) -->
      <a-entity id="rig" position="0 0 0">
        <!-- camera needs an id so script can rotate it -->
        <a-entity id="camera" camera look-controls></a-entity>
      </a-entity>
    </a-entity>

    <!-- HOTSPOT CONTAINER (OUTSIDE rotation container - fixed in world space) -->
    <a-entity id="hotspots"></a-entity>

    <!-- Counter-rotation container to maintain hotspot visibility -->
    <a-entity id="hotspotStabilizer" rotation="0 0 0"></a-entity>
  </a-scene>

  <script>
    const scene = document.querySelector("a-scene");
    const sky = document.querySelector("#sky");
    const camera = document.querySelector("#camera");
    const hotspotsContainer = document.querySelector("#hotspots");
    const turnRoot = document.querySelector("#turnRoot");
    const hotspotStabilizer = document.querySelector("#hotspotStabilizer");
    let canvas = null;

    // scene canvas for cursor change
    scene.addEventListener("loaded", () => {
      canvas = scene.canvas;
    });

    // current node id tracker
    let currentNodeId = "point1";
    let extraYaw = 0;
    
    // Thumbstick rotation state
    let isTurning = false;
    let turnSpeed = 0;
    const TURN_SPEED = 60; // degrees per second
    const DEADZONE = 0.15;
    let lastTime = 0;

    // All config in one object: pano + base yaw + hotspots
    const nodes = {
      point1: {
        skyId: "#pano1",
        yaw: 90,
        hotspots: [
          { id: "hs1", position: "-10 -1 -2", rotation: "0 -90 0", scale: "1.5 1.5 1.5", target: "point2" },
          { id: "hs2", position: "20 -1 0", rotation: "0 90 0", scale: "1.5 1.5 1.5", target: "point3" },
          { id: "hs3", position: "20 -1 -20", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point4" }
        ]
      },
      point2: {
        skyId: "#pano2",
        yaw: 85,
        hotspots: [
          { id: "hs4", position: "0 -0.5 -5", rotation: "0 180 0", scale: "1 1 1", target: "point1" }
        ]
      },
      point3: {
        skyId: "#pano3",
        yaw: -25,
        hotspots: [
          { id: "hs5", position: "-10 -1 -25", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point1" }
        ]
      },
      point4: {
        skyId: "#pano4",
        yaw: -90,
        hotspots: [
          { id: "hs6", position: "-3 -1 6", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point1" },
          { id: "hs7", position: "-2 -0.9 -30", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point5" }
        ]
      },
      point5: {
        skyId: "#pano5",
        yaw: -90,
        hotspots: [
          { id: "hs8", position: "-2 -1 13", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point4" },
          { id: "hs9", position: "2 -0.9 -20", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point6" }
        ]
      },
      point6: {
        skyId: "#pano6",
        yaw: -90,
        hotspots: [
          { id: "hs10", position: "0.8 -0.9 15", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point5" },
          { id: "hs11", position: "-1 -1 -25", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point7" }
        ]
      },
      point7: {
        skyId: "#pano7",
        yaw: 90,
        hotspots: [
          { id: "hs12", position: "0 -1 30", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point6" },
          { id: "hs13", position: "0 -1 -20", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point8" }
        ]
      },
      point8: {
        skyId: "#pano8",
        yaw: -90,
        hotspots: [
          { id: "hs14", position: "-2 -1 20", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point7" },
          { id: "hs15", position: "-15 -1 -30", rotation: "0 0 0", scale: "2 2 2", target: "point9" }
        ]
      },
      point9: {
        skyId: "#pano9",
        yaw: -205,
        hotspots: [
          { id: "hs16", position: "5 -1 20", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point8" },
          { id: "hs17", position: "0 -2 -20", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point10" },
          { id: "hs46", position: "150 -2 -10", rotation: "0 90 0", scale: "8 8 8", target: "point21" }
        ]
      },
      point10: {
        skyId: "#pano10",
        yaw: -80,
        hotspots: [
          { id: "hs18", position: "13 -1 1", rotation: "0 90 0", scale: "1.5 1.5 1.5", target: "point9" },
          { id: "hs19", position: "1 -1 -20", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point11" }
        ]
      },
      point11: {
        skyId: "#pano11",
        yaw: 90,
        hotspots: [
          { id: "hs20", position: "2 -1 12", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point10" },
          { id: "hs21", position: "-2.8 -2 -15", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point12" }
        ]
      },
      point12: {
        skyId: "#pano12",
        yaw: -90,
        hotspots: [
          { id: "hs22", position: "3.2 -5 15", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point11" },
          { id: "hs23", position: "-18 -2 -15", rotation: "0 0 0", scale: "1.5 1.5 1.5", target: "point13" }
        ]
      },
      point13: {
        skyId: "#pano13",
        yaw: 90,
        hotspots: [
          { id: "hs24", position: "10 -1 12", rotation: "0 45 0", scale: "1.5 1.5 1.5", target: "point12" },
          { id: "hs25", position: "10 -4 -18", rotation: "0 0 0", scale: "2 2 2", target: "point14" }
        ]
      },
      point14: {
        skyId: "#pano14",
        yaw: -80,
        hotspots: [
          { id: "hs26", position: "0 -4 15", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point13" },
          { id: "hs27", position: "0 -4 -25", rotation: "0 0 0", scale: "2 2 2", target: "point15" }
        ]
      },
      point15: {
        skyId: "#pano15",
        yaw: 180,
        hotspots: [
          { id: "hs28", position: "0 -1 13", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point14" },
          { id: "hs29", position: "2 -4 -20", rotation: "0 0 0", scale: "2 2 2", target: "point16" }

        ]
      },
      point16: {
        skyId: "#pano16",
        yaw: 180,
        hotspots: [
          { id: "hs30", position: "2 -1 20", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point15" },
          { id: "hs31", position: "-6 -4 -15", rotation: "0 0 0", scale: "2 2 2", target: "point17" },
          { id: "hs32", position: "-3.2 -4 -20", rotation: "0 0 0", scale: "2 2 2", target: "point18" }
        ]
      },
      point17: {
        skyId: "#pano17",
        yaw: -145,
        hotspots: [
          { id: "hs33", position: "8 -3 -1.8", rotation: "0 90 0", scale: "1.5 1.5 1.5", target: "point16" },
          { id: "hs34", position: "-4 -4 -15", rotation: "0 0 0", scale: "2 2 2", target: "point18" }
        ]
      },
      point18: {
        skyId: "#pano18",
        yaw: 0,
        hotspots: [
          { id: "hs35", position: "10 -4 5", rotation: "0 90 0", scale: "1.5 1.5 1.5", target: "point17" },
          { id: "hs36", position: "8 -4 -12", rotation: "0 135 0", scale: "1.5 1.5 1.5", target: "point19" },
          { id: "hs37", position: "-10 -4 -1.5", rotation: "0 90 0", scale: "1.5 1.5 1.5", target: "point20" },
        ]
      },
      point19: {
        skyId: "#pano19",
        yaw: -90,
        hotspots: [
          { id: "hs38", position: "9 -6 -19", rotation: "0 135 0", scale: "2 2 2", target: "point18" },
        ]
      },
      point20: {
        skyId: "#pano20",
        yaw: 0,
        hotspots: [
          { id: "hs38", position: "30 -6 2", rotation: "0 90 0", scale: "3 3 3", target: "point18" },
          { id: "hs39", position: "25 -6 -105", rotation: "0 0 0", scale: "6 6 6", target: "point21" },
          { id: "hs40", position: "-20 -6 -30", rotation: "0 0 0", scale: "6 6 6", target: "point22" },
        ]
      },
      point21: {
        skyId: "#pano21",
        yaw: 90,
        hotspots: [
          { id: "hs41", position: "35 -6 -165", rotation: "0 180 0", scale: "10 10 10", target: "point20" },
          { id: "hs42", position: "-145 -6 1", rotation: "0 90 0", scale: "7 7 7", target: "point9" },
        ]
      },
      point22: {
        skyId: "#pano22",
        yaw: -90,
        hotspots: [
          { id: "hs43", position: "0 -6 -15", rotation: "0 180 0", scale: "1.5 1.5 1.5", target: "point23" },
          { id: "hs44", position: "-30 -6 30", rotation: "0 0 0", scale: "3 3 3", target: "point20" },
          { id: "hs45", position: "35 -6 20", rotation: "0 45 0", scale: "3 3 3", target: "point21" }
        ]
      },
      // hs46 is in point9
      point23: {
        skyId: "#pano23",
        yaw: -90,
        hotspots: [
          { id: "hs47", position: "1 -6 40", rotation: "0 180 0", scale: "4 4 4", target: "point22" },
          { id: "hs48", position: "3 -6 -60", rotation: "0 180 0", scale: "6 6 6", target: "point24" }

        ]
      },
      point24: {
        skyId: "#pano24",
        yaw: -120,
        hotspots: [
          { id: "hs49", position: "1 -6 40", rotation: "0 180 0", scale: "4 4 4", target: "point23" },
          { id: "hs50", position: "3 -6 -60", rotation: "0 180 0", scale: "6 6 6", target: "point25" }

        ]
      },
      point25: {
        skyId: "#pano25",
        yaw: 90,
        hotspots: [
          { id: "hs51", position: "1 -6 40", rotation: "0 180 0", scale: "4 4 4", target: "point24" },
          { id: "hs52", position: "3 -6 -60", rotation: "0 180 0", scale: "6 6 6", target: "point26" }
        ]
      },
      point26: {
        skyId: "#pano26",
        yaw: -90,
        hotspots: [
          { id: "hs53", position: "-45 -6 -2", rotation: "0 90 0", scale: "4 4 4", target: "point25" },
          { id: "hs54", position: "3 -6 -60", rotation: "0 180 0", scale: "6 6 6", target: "point27" },
          { id: "hs55", position: "35 -6 8", rotation: "0 90 0", scale: "6 6 6", target: "point43" }

        ]
      },
      point27: {
        skyId: "#pano27",
        yaw: 0,
        hotspots: [
          { id: "hs56", position: "1 -6 25", rotation: "0 180 0", scale: "4 4 4", target: "point26" },
          { id: "hs57", position: "-3 -6 -60", rotation: "0 180 0", scale: "6 6 6", target: "point28" }
        ]
      },
      point28: {
        skyId: "#pano28",
        yaw: -20,
        hotspots: [
          { id: "hs58", position: "-2 -6 25", rotation: "0 180 0", scale: "4 4 4", target: "point27" },
          { id: "hs59", position: "-3 -6 -35", rotation: "0 180 0", scale: "6 6 6", target: "point31" },
          { id: "hs60", position: "-25 -10 -3", rotation: "0 90 0", scale: "6 6 6", target: "point29" }
        ]
      },
      point29: {
        skyId: "#pano29",
        yaw: 122,
        hotspots: [
          { id: "hs60", position: "4.5 -10 25", rotation: "0 180 0", scale: "4 4 4", target: "point28" },
          { id: "hs61", position: "-3 -6 -35", rotation: "0 180 0", scale: "6 6 6", target: "point30" }
        ]
      },
      point30: {
        skyId: "#pano30",
        yaw: 47,
        hotspots: [
          { id: "hs62", position: "4.5 -10 25", rotation: "0 180 0", scale: "4 4 4", target: "point29" }
        ]
      },
      point31: {
        skyId: "#pano31",
        yaw: -95,
        hotspots: [
          { id: "hs63", position: "0 -10 35", rotation: "0 180 0", scale: "6 6 6", target: "point29" },
          { id: "hs64", position: "30 -6 -4", rotation: "0 90 0", scale: "3 3 3", target: "point32" }
        ]
      },
      point32: {
        skyId: "#pano32",
        yaw: 0,
        hotspots: [
          { id: "hs65", position: "0 -10 35", rotation: "0 180 0", scale: "6 6 6", target: "point31" },
          { id: "hs66", position: "0 -6 -40", rotation: "0 180 0", scale: "6 6 6", target: "point33" }
        ]
      },
      point33: {
        skyId: "#pano33",
        yaw: 180,
        hotspots: [
          { id: "hs67", position: "0 -10 100", rotation: "0 180 0", scale: "10 10 10", target: "point32" },
          { id: "hs68", position: "0 -6 -40", rotation: "0 180 0", scale: "6 6 6", target: "point34" }
        ]
      },
      point34: {
        skyId: "#pano34",
        yaw: 180,
        hotspots: [
          { id: "hs69", position: "0 -10 100", rotation: "0 180 0", scale: "10 10 10", target: "point33" },
          { id: "hs70", position: "0 -6 -40", rotation: "0 180 0", scale: "6 6 6", target: "point35" }
        ]
      },
      point35: {
        skyId: "#pano35",
        yaw: 180,
        hotspots: [
          { id: "hs71", position: "0 -10 100", rotation: "0 180 0", scale: "6 6 6", target: "point34" },
          { id: "hs72", position: "0 -6 -40", rotation: "0 180 0", scale: "4 4 4", target: "point36" }
        ]
      },
      point36: {
        skyId: "#pano36",
        yaw: 170,
        hotspots: [
          { id: "hs73", position: "0 -10 100", rotation: "0 180 0", scale: "6 6 6", target: "point35" },
          { id: "hs74", position: "0 -6 -40", rotation: "0 180 0", scale: "4 4 4", target: "point37" }
        ]
      },
      point37: {
        skyId: "#pano37",
        yaw: 185,
        hotspots: [
          { id: "hs75", position: "0 -10 100", rotation: "0 180 0", scale: "6 6 6", target: "point36" },
          { id: "hs76", position: "0 -6 -40", rotation: "0 180 0", scale: "4 4 4", target: "point38" }
        ]
      },
      point38: {
        skyId: "#pano38",
        yaw: -96,
        hotspots: [
          { id: "hs77", position: "50 -10 1", rotation: "0 90 0", scale: "6 6 6", target: "point37" },
          { id: "hs78", position: "0 -6 -40", rotation: "0 180 0", scale: "4 4 4", target: "point39" }
        ]
      },
      point39: {
        skyId: "#pano39",
        yaw: -5,
        hotspots: [
          { id: "hs77", position: "3 -10 60", rotation: "0 180 0", scale: "6 6 6", target: "point38" },
          { id: "hs78", position: "0 -6 -50", rotation: "0 180 0", scale: "4 4 4", target: "point40" }
        ]
      },
      point40: {
        skyId: "#pano40",
        yaw: 0,
        hotspots: [
          { id: "hs79", position: "60 -10 1", rotation: "0 90 0", scale: "6 6 6", target: "point39" },
          { id: "hs80", position: "0 -6 -50", rotation: "0 180 0", scale: "4 4 4", target: "point41" }
        ]
      },
      point41: {
        skyId: "#pano41",
        yaw: 82,
        hotspots: [
          { id: "hs81", position: "-5 -10 100", rotation: "0 180 0", scale: "6 6 6", target: "point40" },
          { id: "hs82", position: "0 -6 -60", rotation: "0 180 0", scale: "4 4 4", target: "point42" }
        ]
      },
      point42: {
        skyId: "#pano42",
        yaw: 0,
        hotspots: [
          { id: "hs81", position: "-5 -10 100", rotation: "0 180 0", scale: "6 6 6", target: "point41" },
          { id: "hs82", position: "0 -6 -60", rotation: "0 180 0", scale: "4 4 4", target: "point43" }
        ]
      },
      point43: {
        skyId: "#pano43",
        yaw: 0,
        hotspots: [
          { id: "hs83", position: "-2 -10 80", rotation: "0 180 0", scale: "6 6 6", target: "point42" },
          { id: "hs84", position: "10 -6 -120", rotation: "0 180 0", scale: "10 10 10", target: "point26" }
        ]
      },
    };

    // set sky rotation based on node yaw + extraYaw (you can change extraYaw dynamically if needed)
    function updateSkyRotation() {
      const node = nodes[currentNodeId];
      const base = node ? node.yaw : 0;
      // negative because A-Frame sky rotation is inverse of camera yaw in some setups
      sky.setAttribute("rotation", `0 ${-(base + extraYaw)} 0`);
    }

    // create hotspots for the node
    function buildHotspots(nodeId) {
      hotspotsContainer.innerHTML = "";
      const node = nodes[nodeId];
      if (!node || !node.hotspots) return;

      node.hotspots.forEach(conf => {
        const el = document.createElement("a-image");
        el.setAttribute("id", conf.id);
        el.setAttribute("src", "#locIcon");
        el.setAttribute("position", conf.position);
        el.setAttribute("rotation", conf.rotation);
        el.setAttribute("scale", conf.scale);
        el.setAttribute("class", "clickable");
        el.setAttribute("material", "shader: flat; transparent: true; alphaTest: 0.01;");

        // Hover: only change cursor
        el.addEventListener("mouseenter", () => {
          if (canvas) canvas.style.cursor = "pointer";
        });
        el.addEventListener("mouseleave", () => {
          if (canvas) canvas.style.cursor = "default";
        });

        // Click: log + move to target node
        el.addEventListener("click", (evt) => {
          console.log("clicked hotspot:", conf.id, "-> target:", conf.target);
          loadNode(conf.target);
        });

        hotspotsContainer.appendChild(el);
      });
      
      // Apply counter-rotation to stabilize hotspots
      updateHotspotStabilization();
    }

    // Apply counter-rotation to keep hotspots visually stable
    function updateHotspotStabilization() {
      const turnRotation = turnRoot.getAttribute("rotation");
      const currentYaw = turnRotation.y;
      
      // Apply opposite rotation to hotspot stabilizer
      hotspotStabilizer.setAttribute("rotation", `0 ${-currentYaw} 0`);
      
      // Reparent hotspots to stabilizer
      Array.from(hotspotsContainer.children).forEach(hotspot => {
        hotspotStabilizer.appendChild(hotspot);
      });
    }

    // Thumbstick rotation handler
    function setupThumbstickControls() {
      // Handle thumbstick input
      scene.addEventListener("thumbstickmoved", (evt) => {
        const { x, y } = evt.detail;
        
        // Apply deadzone
        if (Math.abs(x) < DEADZONE) {
          turnSpeed = 0;
          isTurning = false;
          return;
        }
        
        isTurning = true;
        turnSpeed = -x * TURN_SPEED; // Negative because thumbstick direction feels more natural
        
        // Reset lastTime for animation frame
        lastTime = performance.now();
      });
      
      // Stop turning when thumbstick returns to center
      scene.addEventListener("thumbstickdown", (evt) => {
        // This event fires when thumbstick is pressed down, not when moved
      });
      
      scene.addEventListener("thumbstickup", (evt) => {
        turnSpeed = 0;
        isTurning = false;
      });
      
      // Animation loop for smooth rotation
      function animateTurn(timestamp) {
        if (isTurning && turnSpeed !== 0) {
          const deltaTime = lastTime ? (timestamp - lastTime) / 1000 : 0;
          lastTime = timestamp;
          
          if (deltaTime > 0) {
            const currentRotation = turnRoot.getAttribute("rotation");
            const newYaw = currentRotation.y + (turnSpeed * deltaTime);
            turnRoot.setAttribute("rotation", `0 ${newYaw} 0`);
            
            // Update hotspot stabilization
            updateHotspotStabilization();
          }
        }
        
        requestAnimationFrame(animateTurn);
      }
      
      requestAnimationFrame(animateTurn);
    }

    // central function to switch nodes (panorama)
    function loadNode(nodeId) {
      const node = nodes[nodeId];
      if (!node) {
        console.warn("node not found:", nodeId);
        return;
      }

      currentNodeId = nodeId;
      // set the sky texture
      sky.setAttribute("src", node.skyId);

      // reset any extra yaw and apply sky rotation
      extraYaw = 0;
      updateSkyRotation();

      // Reset turnRoot rotation when loading new node
      turnRoot.setAttribute("rotation", "0 0 0");
      
      // Update hotspot stabilization
      updateHotspotStabilization();

      // rotate the camera to face the node's base yaw (optional)
      // If you prefer not to rotate camera automatically, comment out the next line
      camera.setAttribute("rotation", `0 ${node.yaw} 0`);

      // build hotspots for the newly loaded node
      buildHotspots(nodeId);

      // log current node to console
      console.log("yo you're now at ➜", currentNodeId);
    }

    // convenience function — kept for compatibility if other code calls loadPoint()
    function loadPoint(pointName) {
      loadNode(pointName);
    }

    // Initialize
    loadNode(currentNodeId);
    
    // Setup thumbstick controls after scene is loaded
    scene.addEventListener("loaded", () => {
      setupThumbstickControls();
    });
  </script>
</body>

</html>


